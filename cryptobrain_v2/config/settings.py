"""
CryptoBrain V2 - ì„¤ì • ë° ìƒìˆ˜ ì •ì˜
"""
import os
from pathlib import Path

# ====================
# ê²½ë¡œ ì„¤ì •
# ====================
BASE_DIR = Path(__file__).parent.parent
DB_PATH = BASE_DIR / "cryptobrain.db"

# ====================
# API ì„¤ì •
# ====================
GOOGLE_API_KEY = os.getenv("GOOGLE_API_KEY", "")
GEMINI_MODEL = "gemini-1.5-pro"  # ë˜ëŠ” gemini-2.0-flash-exp

# ====================
# ê±°ëž˜ì†Œ ì„¤ì •
# ====================
DEFAULT_EXCHANGE = "upbit"
SUPPORTED_EXCHANGES = ["upbit", "binance"]

# ê¸°ë³¸ ê´€ì‹¬ ì½”ì¸
DEFAULT_COINS = ["BTC/KRW", "ETH/KRW", "XRP/KRW", "SOL/KRW", "DOGE/KRW"]

# íƒ€ìž„í”„ë ˆìž„ ì„¤ì •
TIMEFRAMES = {
    "1h": {"label": "1ì‹œê°„", "limit": 48},    # 2ì¼ì¹˜
    "4h": {"label": "4ì‹œê°„", "limit": 30},    # 5ì¼ì¹˜
    "1d": {"label": "1ì¼", "limit": 30},       # 1ë‹¬ì¹˜
}
DEFAULT_TIMEFRAME = "1h"

# ====================
# ê¸°ìˆ ì  ë¶„ì„ ì„¤ì •
# ====================
# ì´ë™í‰ê·  ê¸°ê°„
MA_PERIODS = [7, 20, 50, 200]
EMA_PERIODS = [12, 26]

# RSI ì„¤ì •
RSI_PERIOD = 14
RSI_OVERSOLD = 30
RSI_OVERBOUGHT = 70

# MACD ì„¤ì •
MACD_FAST = 12
MACD_SLOW = 26
MACD_SIGNAL = 9

# ë³¼ë¦°ì € ë°´ë“œ ì„¤ì •
BB_PERIOD = 20
BB_STD = 2

# ATR ì„¤ì •
ATR_PERIOD = 14
ATR_STOP_MULTIPLIER = 1.5

# ====================
# ë¦¬ìŠ¤í¬ ê´€ë¦¬ ì„¤ì •
# ====================
DEFAULT_RISK_PER_TRADE = 0.02      # 2%
MAX_RISK_PER_TRADE = 0.05          # 5%
DEFAULT_MAX_LOSS_TOLERANCE = 0.10  # 10%
MAX_POSITION_SIZE_PCT = 0.40       # ë‹¨ì¼ ì¢…ëª© ìµœëŒ€ 40%

# ====================
# UI ì„¤ì •
# ====================
REFRESH_INTERVAL = 60  # ì´ˆ
CHART_HEIGHT = 400
METRICS_COLUMNS = 3

# íŽ˜ì´ì§€ ì„¤ì •
PAGE_CONFIG = {
    "page_title": "CryptoBrain V2",
    "page_icon": "ðŸ§ ",
    "layout": "wide",
    "initial_sidebar_state": "expanded",
}

# íƒ­ ì„¤ì •
TABS = [
    {"name": "ëŒ€ì‹œë³´ë“œ", "icon": "ðŸ“Š"},
    {"name": "AI ë¶„ì„", "icon": "ðŸ¤–"},
    {"name": "í”„ë¡œí•„", "icon": "âš™ï¸"},
    {"name": "í¬íŠ¸í´ë¦¬ì˜¤", "icon": "ðŸ’¼"},
    {"name": "ë§¤ë§¤ì¼ì§€", "icon": "ðŸ“"},
]

# ====================
# íˆ¬ìžìž í”„ë¡œí•„ ì˜µì…˜
# ====================
INVESTMENT_GOALS = {
    "ë‹¨ê¸°ìˆ˜ìµ": "ë¹ ë¥¸ ìˆ˜ìµ ì‹¤í˜„ì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤",
    "ìž¥ê¸°ìžì‚°ì¦ì‹": "ìž¥ê¸°ì ì¸ ìžì‚° ì¦ì‹ì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤",
    "ìš©ëˆë²Œì´": "ì†Œì†Œí•œ ë¶€ìˆ˜ìž…ì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤",
}

INVESTMENT_HORIZONS = {
    "1ê°œì›”ë¯¸ë§Œ": "ë‹¨íƒ€/ìŠ¤ìº˜í•‘",
    "1-6ê°œì›”": "ìŠ¤ìœ™ íŠ¸ë ˆì´ë”©",
    "6ê°œì›”-1ë…„": "ì¤‘ê¸° íˆ¬ìž",
    "1ë…„ì´ìƒ": "ìž¥ê¸° íˆ¬ìž",
}

RISK_TOLERANCES = {
    "aggressive": "ê³µê²©ì  - ë†’ì€ ë¦¬ìŠ¤í¬/ë†’ì€ ìˆ˜ìµ ì¶”êµ¬",
    "moderate": "ì¤‘ë¦½ì  - ê· í˜•ìž¡ížŒ ë¦¬ìŠ¤í¬/ìˆ˜ìµ",
    "conservative": "ë³´ìˆ˜ì  - ë‚®ì€ ë¦¬ìŠ¤í¬/ì•ˆì •ì  ìˆ˜ìµ",
}

VOLATILITY_PREFERENCES = {
    "low": "ë‚®ìŒ - ì•ˆì •ì ì¸ ëŒ€í˜• ì½”ì¸ ì„ í˜¸",
    "medium": "ì¤‘ê°„ - ì ì ˆí•œ ë³€ë™ì„± ìˆ˜ìš©",
    "high": "ë†’ìŒ - ë†’ì€ ë³€ë™ì„± ì½”ì¸ ì„ í˜¸",
}

TRADING_STYLES = {
    "scalping": "ìŠ¤ìº˜í•‘ - ë¶„~ì‹œê°„ ë‹¨ìœ„ ì´ˆë‹¨ê¸° ë§¤ë§¤",
    "swing": "ìŠ¤ìœ™ - ì¼~ì£¼ ë‹¨ìœ„ ë‹¨ê¸° ë§¤ë§¤",
    "position": "í¬ì§€ì…˜ - ì£¼~ì›” ë‹¨ìœ„ ì¤‘ìž¥ê¸° ë§¤ë§¤",
}

TRADING_FREQUENCIES = {
    "daily": "ë§¤ì¼ - í•˜ë£¨ì— ì—¬ëŸ¬ ë²ˆ ê±°ëž˜",
    "weekly": "ì£¼ê°„ - ì¼ì£¼ì¼ì— ëª‡ ë²ˆ ê±°ëž˜",
    "monthly": "ì›”ê°„ - í•œ ë‹¬ì— ëª‡ ë²ˆ ê±°ëž˜",
}

TRADING_SESSIONS = {
    "asia": "ì•„ì‹œì•„ ì„¸ì…˜ (09:00-18:00 KST)",
    "europe": "ìœ ëŸ½ ì„¸ì…˜ (16:00-01:00 KST)",
    "us": "ë¯¸êµ­ ì„¸ì…˜ (22:00-07:00 KST)",
    "all": "ì „ì²´ - ì‹œê°„ ì œí•œ ì—†ìŒ",
}

SKILL_LEVELS = {
    "beginner": "ì´ˆë³´ - ê¸°ìˆ ì  ë¶„ì„ì„ ë°°ìš°ëŠ” ì¤‘",
    "intermediate": "ì¤‘ê¸‰ - ê¸°ë³¸ ì§€í‘œëŠ” ì´í•´í•¨",
    "advanced": "ê³ ê¸‰ - ë‹¤ì–‘í•œ ë¶„ì„ ê¸°ë²• í™œìš©",
}

COMMON_MISTAKES = [
    "FOMOë§¤ìˆ˜",
    "ì†ì ˆëª»í•¨",
    "ë¬¼íƒ€ê¸°",
    "ì¡°ê¸°ìµì ˆ",
    "ê³¼ë„í•œê±°ëž˜",
    "ë ˆë²„ë¦¬ì§€ë‚¨ìš©",
    "ë‰´ìŠ¤ë§¤ë§¤",
    "ê°ì •ì ë§¤ë§¤",
]

# ====================
# ë§¤ë§¤ ê¸°ë¡ ì˜µì…˜
# ====================
MARKET_CONDITIONS = {
    "bull": "ìƒìŠ¹ìž¥",
    "bear": "í•˜ë½ìž¥",
    "sideways": "íš¡ë³´ìž¥",
}

TRIGGER_REASONS = {
    "AIì¶”ì²œ": "AI ë¶„ì„/ì¶”ì²œì— ë”°ë¥¸ ë§¤ë§¤",
    "ë³¸ì¸íŒë‹¨": "ë³¸ì¸ì˜ ë¶„ì„ì— ë”°ë¥¸ ë§¤ë§¤",
    "ë‰´ìŠ¤": "ë‰´ìŠ¤/ì´ìŠˆì— ë”°ë¥¸ ë§¤ë§¤",
    "FOMO": "ë†“ì¹ ê¹Œë´ ê¸‰í•˜ê²Œ ë§¤ìˆ˜",
    "ê³µí¬ë§¤ë„": "ë¶ˆì•ˆí•´ì„œ ì†ì ˆ/ìµì ˆ",
}

EMOTIONAL_STATES = {
    "ì¹¨ì°©": "ì°¨ë¶„í•˜ê³  ê³„íšëŒ€ë¡œ ì‹¤í–‰",
    "í™•ì‹ ": "ê°•í•œ í™•ì‹ ì„ ê°–ê³  ë§¤ë§¤",
    "í¥ë¶„": "ê¸°ëŒ€ê°ì— í¥ë¶„ ìƒíƒœ",
    "ë¶ˆì•ˆ": "ë¶ˆì•ˆí•˜ê³  ê±±ì •ë˜ëŠ” ìƒíƒœ",
}

TRADE_TAGS = [
    "ì†ì ˆì„±ê³µ",
    "ëª©í‘œê°€ë„ë‹¬",
    "ì¡°ê¸°ì²­ì‚°",
    "ë¬¼íƒ€ê¸°",
    "FOMO",
    "íŒ¨ë‹‰ì…€",
    "ê³„íšëŒ€ë¡œ",
    "ì¶©ë™ë§¤ë§¤",
]

# ====================
# AI í”„ë¡¬í”„íŠ¸ ì„¤ì •
# ====================
AI_PERSONALITY = """ë‹¹ì‹ ì€ 'CryptoBrain', 20ë…„ ê²½ë ¥ì˜ ì•”í˜¸í™”í í€€íŠ¸ íŠ¸ë ˆì´ë”ìž…ë‹ˆë‹¤.
ë‹¹ì‹ ì˜ íŠ¹ì§•:
- ë°ì´í„°ì— ê·¼ê±°í•œ ëƒ‰ì •í•œ ë¶„ì„
- í¬ë§ì  í•´ì„(Hopium) ê²½ê³„
- ë¦¬ìŠ¤í¬ ê´€ë¦¬ ìµœìš°ì„ 
- ê°œì¸ ë§žì¶¤í˜• ì¡°ì–¸ ì œê³µ
"""

RESPONSE_FORMAT = """
## ë¶„ì„ ìš”ì•½
(í˜„ìž¬ ìƒí™© ìš”ì•½)

## ë§¤ë§¤ ì˜ê²¬
- ì˜ê²¬: ë§¤ìˆ˜ / ë§¤ë„ / ê´€ë§
- ì‹ ë¢°ë„: ìƒ / ì¤‘ / í•˜
- ê·¼ê±°: (1~2ë¬¸ìž¥)

## ì‹¤í–‰ ê³„íš (ë§¤ìˆ˜/ë§¤ë„ ì‹œì—ë§Œ)
- ì§„ìž…ê°€:
- ëª©í‘œê°€:
- ì†ì ˆê°€:
- ì¶”ì²œ ê¸ˆì•¡:
- ì˜ˆìƒ ì†ì‹¤: (ì†ì ˆ ì‹œ)
- ì˜ˆìƒ ìˆ˜ìµ: (ëª©í‘œê°€ ë„ë‹¬ ì‹œ)

## ë¦¬ìŠ¤í¬ ìš”ì¸
(ì£¼ì˜í•´ì•¼ í•  ì )
"""

# ====================
# ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
# ====================
def get_coin_symbol(coin: str, quote: str = "KRW") -> str:
    """ì½”ì¸ ì‹¬ë³¼ ìƒì„±"""
    if "/" in coin:
        return coin
    return f"{coin}/{quote}"


def get_coin_name(symbol: str) -> str:
    """ì‹¬ë³¼ì—ì„œ ì½”ì¸ ì´ë¦„ ì¶”ì¶œ"""
    return symbol.split("/")[0]


def format_krw(value: float) -> str:
    """KRW í¬ë§·íŒ…"""
    return f"{value:,.0f}ì›"


def format_percent(value: float, with_sign: bool = True) -> str:
    """í¼ì„¼íŠ¸ í¬ë§·íŒ…"""
    if with_sign and value > 0:
        return f"+{value:.2f}%"
    return f"{value:.2f}%"


if __name__ == "__main__":
    print(f"DB Path: {DB_PATH}")
    print(f"Default coins: {DEFAULT_COINS}")
    print(f"Timeframes: {list(TIMEFRAMES.keys())}")
